<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文档库 - OA系统</title>
    <link rel="stylesheet" href="../CSS/common.css">
    <link rel="stylesheet" href="../CSS/main.css">
    <style>
        /* 全局样式重置和基础设置 */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        /* 文档库容器样式 */
        .document-library-container {
            padding: 20px;
            background-color: #f5f7fa;
            min-height: 100vh;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        }
        
        /* 文档库头部样式 */
        .document-library-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        
        .document-library-header h2 {
            margin: 0;
            color: #333;
            font-size: 22px;
            font-weight: 600;
        }
        
        .header-actions {
            display: flex;
            gap: 12px;
        }
        
        /* 按钮样式优化 */
        .btn-primary {
            background-color: #409EFF;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        
        .btn-primary:hover {
            background-color: #66b1ff;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(64, 158, 255, 0.2);
        }
        
        .btn-primary:active {
            transform: translateY(0);
            box-shadow: 0 2px 6px rgba(64, 158, 255, 0.2);
        }
        
        .btn-secondary {
            padding: 10px 20px;
            border: 1px solid #dcdfe6;
            background-color: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        
        .btn-secondary:hover {
            border-color: #409EFF;
            color: #409EFF;
            box-shadow: 0 2px 8px rgba(64, 158, 255, 0.1);
        }
        
        /* 搜索和筛选区域 */
        .search-filter {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: white;
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
            padding: 20px;
            margin-bottom: 24px;
            transition: box-shadow 0.3s ease;
        }
        
        .search-filter:hover {
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
        }
        
        .search-input-container {
            display: flex;
            align-items: center;
            gap: 16px;
            flex: 1;
        }
        
        .search-input {
            padding: 10px 16px;
            border: 1px solid #dcdfe6;
            border-radius: 4px;
            width: 360px;
            font-size: 14px;
            transition: all 0.3s ease;
            background-color: #f8f9fa;
        }
        
        .search-input:focus {
            outline: none;
            border-color: #409EFF;
            background-color: white;
            box-shadow: 0 0 0 2px rgba(64, 158, 255, 0.1);
        }
        
        .filter-select {
            padding: 10px 16px;
            border: 1px solid #dcdfe6;
            border-radius: 4px;
            font-size: 14px;
            background-color: white;
            transition: all 0.3s ease;
            min-width: 120px;
        }
        
        .filter-select:focus {
            outline: none;
            border-color: #409EFF;
            box-shadow: 0 0 0 2px rgba(64, 158, 255, 0.1);
        }
        
        /* 面包屑导航 */
        .breadcrumb {
            margin-bottom: 16px;
            padding: 12px 0;
            color: #606266;
            font-size: 14px;
            background-color: white;
            border-radius: 6px;
            padding: 12px 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
        }
        
        .breadcrumb-item {
            display: inline-block;
            cursor: pointer;
            transition: color 0.2s ease;
            padding: 4px 8px;
            border-radius: 4px;
        }
        
        .breadcrumb-item:hover {
            color: #409EFF;
            background-color: #ecf5ff;
        }
        
        .breadcrumb-separator {
            margin: 0 8px;
            color: #c0c4cc;
        }
        
        .breadcrumb-item.active {
            color: #303133;
            cursor: default;
            font-weight: 500;
        }
        
        .breadcrumb-item.active:hover {
            background-color: transparent;
        }
        
        /* 标签页导航 */
        .document-tabs {
            display: flex;
            background-color: white;
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
            padding: 0 24px;
            margin-bottom: 24px;
            overflow-x: auto;
            scrollbar-width: none;
        }
        
        .document-tabs::-webkit-scrollbar {
            display: none;
        }
        
        .tab-item {
            padding: 16px 24px;
            cursor: pointer;
            font-size: 14px;
            color: #606266;
            border-bottom: 2px solid transparent;
            white-space: nowrap;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .tab-item:hover {
            color: #409EFF;
        }
        
        .tab-item.active {
            color: #409EFF;
            border-bottom-color: #409EFF;
        }
        
        /* 主内容布局 */
        .content-layout {
            display: flex;
            gap: 24px;
            min-height: calc(100vh - 350px);
        }
        
        /* 树形文件夹结构样式 */
        .folder-tree-container {
            width: 280px;
            border: 1px solid #ebeef5;
            border-radius: 6px;
            background-color: white;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
            flex-shrink: 0;
            transition: all 0.3s ease;
        }
        
        .folder-tree-container:hover {
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
        }
        
        .folder-tree-header {
            padding: 16px 20px;
            border-bottom: 1px solid #ebeef5;
            font-weight: 600;
            color: #333;
            font-size: 14px;
            background-color: #f8f9fa;
            border-top-left-radius: 6px;
            border-top-right-radius: 6px;
        }
        
        .folder-tree-content {
            padding: 12px;
            max-height: 600px;
            overflow-y: auto;
        }
        
        .folder-tree-content::-webkit-scrollbar {
            width: 6px;
        }
        
        .folder-tree-content::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }
        
        .folder-tree-content::-webkit-scrollbar-thumb {
            background: #c0c4cc;
            border-radius: 3px;
        }
        
        .folder-tree-content::-webkit-scrollbar-thumb:hover {
            background: #909399;
        }
        
        .tree-node {            padding: 6px 0;            cursor: pointer;            display: block;            align-items: center;            font-size: 14px;            color: #606266;            transition: all 0.2s ease;            border-radius: 4px;            position: relative;        }        
        /* 树形节点内容容器 - 用于flex布局 */        .tree-node-inner {            display: flex;            align-items: center;        }        
        .tree-node:hover {            color: #409EFF;            background-color: #ecf5ff;        }        
        .tree-node.active {            color: #409EFF;            background-color: #ecf5ff;            font-weight: 500;        }        
        .tree-node-content {            display: flex;            align-items: center;            flex: 1;            padding: 6px 12px;        }        
        .tree-node-icon {            margin-right: 10px;            width: 20px;            height: 20px;            display: flex;            align-items: center;            justify-content: center;        }        
        .tree-node-icon svg {            width: 16px;            height: 16px;        }        
        .tree-node-children {            padding-left: 24px;            display: none;            animation: fadeIn 0.3s ease;            position: relative;        }        
        /* 添加树形连接线 */        .tree-node-children::before {            content: '';            position: absolute;            left: 8px;            top: 0;            bottom: 0;            width: 1px;            background-color: #dcdfe6;        }        
        .tree-node:not(:last-child)::before {            content: '';            position: absolute;            left: 8px;            top: 20px;            height: calc(100% + 16px);            width: 1px;            background-color: #dcdfe6;        }        
        .tree-node::after {            content: '';            position: absolute;            left: 9px;            top: 20px;            height: 1px;            width: 14px;            background-color: #dcdfe6;        }        
        .tree-node:last-child::before {            height: 20px;        }        
        @keyframes fadeIn {            from { opacity: 0; transform: translateY(-4px); }            to { opacity: 1; transform: translateY(0); }        }        
        .tree-node-children.expanded {            display: block;        }        
        .tree-toggle {            width: 20px;            height: 20px;            display: inline-flex;            align-items: center;            justify-content: center;            cursor: pointer;            margin-right: 4px;            transition: transform 0.2s ease;            color: #909399;            position: relative;            z-index: 1;        }        
        .tree-toggle::before {            content: '';            position: absolute;            left: 50%;            top: 50%;            width: 12px;            height: 12px;            background-color: #fff;            transform: translate(-50%, -50%);            z-index: -1;        }        
        .tree-toggle.expanded {            transform: rotate(90deg);            color: #409EFF;        }
        
        /* 文档内容区域 */
        .document-content {
            background-color: white;
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
            padding: 24px;
            flex: 1;
            transition: all 0.3s ease;
        }
        
        .document-content:hover {
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
        }
        
        /* 文档网格布局 */
        .document-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }
        
        /* 文档卡片样式 */
        .document-card {
            border: 1px solid #ebeef5;
            border-radius: 6px;
            padding: 20px;
            transition: all 0.3s ease;
            background-color: white;
            position: relative;
            overflow: hidden;
            height: 220px;
            display: flex;
            flex-direction: column;
        }
        
        .document-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background-color: transparent;
            transition: background-color 0.3s ease;
        }
        
        .document-card:hover {
            border-color: #409EFF;
            box-shadow: 0 6px 20px rgba(64, 158, 255, 0.15);
            transform: translateY(-2px);
        }
        
        .document-card:hover::before {
            background-color: #409EFF;
        }
        
        /* 文档图标样式 */
        .document-icon {
            width: 72px;
            height: 72px;
            background-color: #ecf5ff;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 16px;
            transition: all 0.3s ease;
        }
        
        .document-card:hover .document-icon {
            transform: scale(1.05);
        }
        
        .document-icon svg {
            width: 36px;
            height: 36px;
            color: #409EFF;
        }
        
        /* 文件夹图标样式 */
        .folder-icon {
            background-color: #fff0e6;
        }
        
        .folder-icon svg {
            color: #ff9800;
        }
        
        /* 文档名称和元数据 */
        .document-name {
            font-size: 14px;
            color: #333;
            margin-bottom: 8px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            font-weight: 500;
        }
        
        .document-meta {
            font-size: 12px;
            color: #909399;
            margin-bottom: 12px;
            line-height: 1.6;
        }
        
        /* 文档操作按钮 */
        .document-actions {
            display: flex;
            justify-content: space-between;
            margin-top: auto;
            opacity: 0.9;
            transition: opacity 0.3s ease;
        }
        
        .document-card:hover .document-actions {
            opacity: 1;
        }
        
        .btn-view,
        .btn-download,
        .btn-share {
            padding: 6px 12px;
            border: 1px solid #dcdfe6;
            background-color: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }
        
        .btn-view:hover,
        .btn-download:hover,
        .btn-share:hover {
            border-color: #409EFF;
            color: #409EFF;
            background-color: #f5faff;
            transform: translateY(-1px);
        }
        
        /* 分页控件样式 */
        .pagination {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            margin-top: 24px;
            gap: 8px;
            padding: 16px;
            background-color: white;
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
        }
        
        .pagination-info {
            color: #606266;
            font-size: 14px;
            margin-right: 16px;
        }
        
        .pagination-btn {
            padding: 8px 16px;
            border: 1px solid #dcdfe6;
            background-color: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            min-width: 36px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        .pagination-btn:hover:not(:disabled) {
            color: #409EFF;
            border-color: #c6e2ff;
            background-color: #ecf5ff;
        }
        
        .pagination-btn:disabled {
            cursor: not-allowed;
            opacity: 0.5;
            background-color: #f5f7fa;
        }
        
        .pagination-btn.active {
            background-color: #409EFF;
            color: white;
            border-color: #409EFF;
        }
        
        /* 分享弹窗样式 */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            display: none;
            animation: fadeIn 0.3s ease;
        }
        
        .modal {
            background-color: white;
            border-radius: 8px;
            width: 560px;
            max-width: 90%;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
            animation: slideIn 0.3s ease;
            overflow: hidden;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .modal-header {
            padding: 20px 24px;
            border-bottom: 1px solid #ebeef5;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #f8f9fa;
        }
        
        .modal-title {
            font-size: 18px;
            color: #303133;
            font-weight: 600;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 20px;
            color: #909399;
            cursor: pointer;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            transition: all 0.2s ease;
        }
        
        .modal-close:hover {
            background-color: #f5f7fa;
            color: #606266;
            transform: rotate(90deg);
        }
        
        .modal-body {
            padding: 24px;
        }
        
        .modal-footer {
            padding: 16px 24px;
            border-top: 1px solid #ebeef5;
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }
        
        /* 分享设置样式 */
        .share-item {
            margin-bottom: 20px;
        }
        
        .share-item-label {
            display: block;
            margin-bottom: 10px;
            color: #606266;
            font-size: 14px;
            font-weight: 500;
        }
        
        .share-input {
            width: 100%;
            padding: 10px 16px;
            border: 1px solid #dcdfe6;
            border-radius: 4px;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .share-input:focus {
            outline: none;
            border-color: #409EFF;
            box-shadow: 0 0 0 2px rgba(64, 158, 255, 0.1);
        }
        
        .share-permission {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .permission-option {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 4px;
            transition: background-color 0.3s ease;
        }
        
        .permission-option:hover {
            background-color: #f5f7fa;
        }
        
        .permission-option input[type="radio"] {
            cursor: pointer;
            width: 16px;
            height: 16px;
        }
        
        .copy-btn {
            margin-left: 12px;
            padding: 10px 16px;
            font-size: 14px;
            flex-shrink: 0;
        }
        
        .share-input-row {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        
        .share-input-row .share-input {
            flex: 1;
        }
        
        .share-users {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #ebeef5;
            border-radius: 4px;
            padding: 12px;
            margin-top: 12px;
            background-color: #fafbfc;
        }
        
        .share-users::-webkit-scrollbar {
            width: 6px;
        }
        
        .share-users::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }
        
        .share-users::-webkit-scrollbar-thumb {
            background: #c0c4cc;
            border-radius: 3px;
        }
        
        .share-user-item {
            padding: 10px 12px;
            border-radius: 4px;
            background-color: white;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid #ebeef5;
            transition: all 0.3s ease;
        }
        
        .share-user-item:hover {
            border-color: #409EFF;
            background-color: #f0f8ff;
        }
        
        .share-user-name {
            font-size: 14px;
            color: #606266;
            font-weight: 500;
        }
        
        .remove-share {
            background: none;
            border: none;
            color: #f56c6c;
            cursor: pointer;
            font-size: 18px;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            transition: all 0.3s ease;
        }
        
        .remove-share:hover {
            background-color: #fef0f0;
            transform: rotate(90deg);
        }
        
        .add-user-btn {
            width: 100%;
            padding: 12px;
            border: 1px dashed #dcdfe6;
            background-color: #f5f7fa;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            color: #909399;
            margin-top: 16px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .add-user-btn:hover {
            border-color: #409EFF;
            color: #409EFF;
            background-color: #ecf5ff;
        }
        
        /* 响应式设计 */
        @media (max-width: 1200px) {
            .document-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
            
            .folder-tree-container {
                width: 250px;
            }
        }
        
        @media (max-width: 768px) {
            .document-library-container {
                padding: 12px;
            }
            
            .document-library-header {
                flex-direction: column;
                gap: 16px;
                align-items: stretch;
            }
            
            .header-actions {
                justify-content: space-between;
            }
            
            .search-filter {
                flex-direction: column;
                gap: 16px;
                align-items: stretch;
            }
            
            .search-input {
                width: 100%;
            }
            
            .search-input-container {
                flex-direction: column;
                gap: 12px;
            }
            
            .content-layout {
                flex-direction: column;
            }
            
            .folder-tree-container {
                width: 100%;
            }
            
            .document-grid {
                grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            }
            
            .modal {
                width: 95%;
                margin: 20px;
            }
            
            .share-permission {
                flex-direction: column;
                gap: 12px;
            }
            
            .share-input-row {
                flex-direction: column;
                align-items: stretch;
            }
            
            .copy-btn {
                margin-left: 0;
                margin-top: 8px;
            }
            
            .pagination {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .pagination-info {
                order: -1;
                width: 100%;
                text-align: center;
                margin-right: 0;
                margin-bottom: 12px;
            }
        }
        
        /* 动画效果 */
        .fade-enter-active, .fade-leave-active {
            transition: opacity 0.3s ease;
        }
        
        .fade-enter-from, .fade-leave-to {
            opacity: 0;
        }
        
        /* 模态框基础样式 */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        /* 弹窗基础样式 - 扁平化设计 */
        .modal {
            background-color: white;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            width: 500px;
            max-width: 90vw;
            max-height: 90vh;
            overflow-y: auto;
            transform: translateY(-10px);
            opacity: 0;
            transition: transform 0.2s ease, opacity 0.2s ease;
            border: 1px solid #e8e8e8;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            border-bottom: 1px solid #e8e8e8;
            background-color: #fafafa;
        }
        
        .modal-title {
            font-size: 16px;
            font-weight: 500;
            color: #333;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: #999;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            transition: all 0.2s ease;
        }
        
        .modal-close:hover {
            background-color: #f5f5f5;
            color: #666;
        }
        
        .modal-body {
            padding: 20px;
        }
        
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            padding: 12px 20px;
            border-top: 1px solid #e8e8e8;
            background-color: #fafafa;
        }
        
        /* 文件类型特定样式 */
        .document-card[data-type="doc"] .document-icon {
            background-color: #e6f7ff;
        }
        
        .document-card[data-type="doc"] .document-icon svg {
            color: #1890ff;
        }
        
        .document-card[data-type="sheet"] .document-icon {
            background-color: #f6ffed;
        }
        
        .document-card[data-type="sheet"] .document-icon svg {
            color: #52c41a;
        }
        
        .document-card[data-type="slide"] .document-icon {
            background-color: #fffbe6;
        }
        
        .document-card[data-type="slide"] .document-icon svg {
            color: #faad14;
        }
        
        .document-card[data-type="pdf"] .document-icon {
            background-color: #fff1f0;
        }
        
        .document-card[data-type="pdf"] .document-icon svg {
            color: #f5222d;
        }
        
        .document-card[data-type="image"] .document-icon {
            background-color: #f9f0ff;
        }
        
        .document-card[data-type="image"] .document-icon svg {
            color: #722ed1;
        }
    </style>
</head>
<body>
    <div class="document-library-container">
        <div class="document-library-header">
            <h2>文档库</h2>
            <div class="header-actions">
                <button class="btn-primary">上传文档</button>
                <button class="btn-secondary">新建文件夹</button>
                <button class="btn-secondary" onclick="window.location.href='document_my.html'">我的文档</button>
                <button class="btn-secondary" onclick="window.location.href='document_share.html'">文档共享</button>
                <button class="btn-secondary" onclick="window.location.href='document_recycle.html'">回收站</button>
                <button class="btn-secondary" onclick="window.location.href='document_category.html'">分类</button>
            </div>
        </div>
        
        <div class="search-filter">
            <div class="search-input-container">
                <input type="text" class="search-input" placeholder="搜索文档名称或内容">
                <select class="filter-select">
                    <option value="all">全部类型</option>
                    <option value="doc">文档</option>
                    <option value="sheet">表格</option>
                    <option value="slide">演示文稿</option>
                    <option value="pdf">PDF</option>
                    <option value="image">图片</option>
                    <option value="folder">文件夹</option>
                </select>
            </div>
            <div>
                <button class="btn-secondary">高级筛选</button>
            </div>
        </div>
        

        
        <div class="document-tabs">
            <div class="tab-item active">全部</div>
            <div class="tab-item">文档</div>
            <div class="tab-item">表格</div>
            <div class="tab-item">演示文稿</div>
            <div class="tab-item">PDF</div>
            <div class="tab-item">图片</div>
            <div class="tab-item">文件夹</div>
        </div>
        <div class="content-layout">
            <!-- 树形文件夹结构 -->
            <div class="folder-tree-container">
                <div class="folder-tree-header">文件夹结构</div>
                <div class="folder-tree-content">
                    <div class="tree-node active" data-path="/">
                        <div class="tree-node-content">
                            <div class="tree-node-icon">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M9 13L21 13V18C21 19.6569 19.6569 21 18 21H6C4.34315 21 3 19.6569 3 18V6C3 4.34315 4.34315 3 6 3H14L21 10V13H9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            文档库
                        </div>
                    </div>
                    <div class="tree-node" data-path="/company-documents/">
                        <div class="tree-node-inner">
                            <div class="tree-toggle">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M8 12H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="tree-node-content">
                                <div class="tree-node-icon">
                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M9 13L21 13V18C21 19.6569 19.6569 21 18 21H6C4.34315 21 3 19.6569 3 18V6C3 4.34315 4.34315 3 6 3H14L21 10V13H9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                公司文档
                            </div>
                        </div>
                        <div class="tree-node-children">
                            <div class="tree-node" data-path="/company-documents/handbook/">
                                <div class="tree-node-inner">
                                    <div class="tree-node-content">
                                        <div class="tree-node-icon">
                                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M9 13L21 13V18C21 19.6569 19.6569 21 18 21H6C4.34315 21 3 19.6569 3 18V6C3 4.34315 4.34315 3 6 3H14L21 10V13H9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                        </div>
                                        员工手册
                                    </div>
                                </div>
                            </div>
                            <div class="tree-node" data-path="/company-documents/financial/">
                                <div class="tree-node-inner">
                                    <div class="tree-node-content">
                                        <div class="tree-node-icon">
                                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M9 13L21 13V18C21 19.6569 19.6569 21 18 21H6C4.34315 21 3 19.6569 3 18V6C3 4.34315 4.34315 3 6 3H14L21 10V13H9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                        </div>
                                        财务报表
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tree-node" data-path="/project-documents/">
                        <div class="tree-node-inner">
                            <div class="tree-toggle">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M8 12H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="tree-node-content">
                                <div class="tree-node-icon">
                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M9 13L21 13V18C21 19.6569 19.6569 21 18 21H6C4.34315 21 3 19.6569 3 18V6C3 4.34315 4.34315 3 6 3H14L21 10V13H9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                项目文档
                            </div>
                        </div>
                        <div class="tree-node-children">
                            <div class="tree-node" data-path="/project-documents/requirements/">
                                <div class="tree-node-inner">
                                    <div class="tree-node-content">
                                        <div class="tree-node-icon">
                                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M9 13L21 13V18C21 19.6569 19.6569 21 18 21H6C4.34315 21 3 19.6569 3 18V6C3 4.34315 4.34315 3 6 3H14L21 10V13H9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                        </div>
                                        需求文档
                                    </div>
                                </div>
                            </div>
                            <div class="tree-node" data-path="/project-documents/design/">
                                <div class="tree-node-inner">
                                    <div class="tree-node-content">
                                        <div class="tree-node-icon">
                                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M9 13L21 13V18C21 19.6569 19.6569 21 18 21H6C4.34315 21 3 19.6569 3 18V6C3 4.34315 4.34315 3 6 3H14L21 10V13H9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                        </div>
                                        设计稿
                                    </div>
                                </div>
                            </div>
                            <div class="tree-node" data-path="/project-documents/development/">
                                <div class="tree-node-inner">
                                    <div class="tree-node-content">
                                        <div class="tree-node-icon">
                                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M9 13L21 13V18C21 19.6569 19.6569 21 18 21H6C4.34315 21 3 19.6569 3 18V6C3 4.34315 4.34315 3 6 3H14L21 10V13H9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                        </div>
                                        开发文档
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 文档内容 -->
            <div class="document-content" style="flex: 1;">
                <div class="document-grid">
                    <!-- 文件夹卡片1 -->
                    <div class="document-card folder-card" data-type="folder" data-path="/company-documents/" data-create-date="2023-05-20" data-modify-date="2023-05-20" data-creator="张三">
                        <div class="document-icon folder-icon">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M9 13L21 13V18C21 19.6569 19.6569 21 18 21H6C4.34315 21 3 19.6569 3 18V6C3 4.34315 4.34315 3 6 3H14L21 10V13H9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="document-name">公司文档</div>
                        <div class="document-meta">
                            <div>2023-05-20</div>
                            <div>2 个子文件夹</div>
                        </div>
                        <div class="document-actions">
                            <button class="btn-view">打开</button>
                            <button class="btn-share">分享</button>
                        </div>
                    </div>
                    
                    <!-- 文件夹卡片2 -->
                    <div class="document-card folder-card" data-type="folder" data-path="/project-documents/" data-create-date="2023-05-25" data-modify-date="2023-05-25" data-creator="李四">
                        <div class="document-icon folder-icon">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M9 13L21 13V18C21 19.6569 19.6569 21 18 21H6C4.34315 21 3 19.6569 3 18V6C3 4.34315 4.34315 3 6 3H14L21 10V13H9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="document-name">项目文档</div>
                        <div class="document-meta">
                            <div>2023-05-25</div>
                            <div>3 个子文件夹</div>
                        </div>
                        <div class="document-actions">
                            <button class="btn-view">打开</button>
                            <button class="btn-share">分享</button>
                        </div>
                    </div>
                    
                    <!-- Word文档 -->
                    <div class="document-card" data-type="doc" data-create-date="2023-06-01" data-modify-date="2023-06-01" data-size="2.5" data-creator="张三">
                        <div class="document-icon">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M14 2H6C4.89543 2 4 2.89543 4 4V20C4 21.1046 4.89543 22 6 22H18C19.1046 22 20 21.1046 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M14 2V8H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M16 13H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M16 17H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M10 9H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="document-name">员工手册.docx</div>
                        <div class="document-meta">
                            <div>2023-06-01</div>
                            <div>2.5MB</div>
                        </div>
                        <div class="document-actions">
                            <button class="btn-view">查看</button>
                            <button class="btn-download">下载</button>
                            <button class="btn-share">分享</button>
                        </div>
                    </div>
                    
                    <!-- Excel文档 -->
                    <div class="document-card" data-type="sheet" data-create-date="2023-06-10" data-modify-date="2023-06-10" data-size="5.8" data-creator="王五">
                        <div class="document-icon">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3 3H21V21H3V3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M3 9H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M9 21V3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M15 21V3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="document-name">2023年Q2财务报表.xlsx</div>
                        <div class="document-meta">
                            <div>2023-06-10</div>
                            <div>5.8MB</div>
                        </div>
                        <div class="document-actions">
                            <button class="btn-view">查看</button>
                            <button class="btn-download">下载</button>
                            <button class="btn-share">分享</button>
                        </div>
                    </div>
                    
                    <!-- PPT文档 -->
                    <div class="document-card" data-type="slide" data-create-date="2023-06-15" data-modify-date="2023-06-15" data-size="12.3" data-creator="李四">
                        <div class="document-icon">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M3 9H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M9 21V9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <circle cx="16" cy="16" r="2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="document-name">产品发布会演示.pptx</div>
                        <div class="document-meta">
                            <div>2023-06-15</div>
                            <div>12.3MB</div>
                        </div>
                        <div class="document-actions">
                            <button class="btn-view">查看</button>
                            <button class="btn-download">下载</button>
                            <button class="btn-share">分享</button>
                        </div>
                    </div>
                    
                    <!-- PDF文档 -->
                    <div class="document-card" data-type="pdf" data-create-date="2023-06-05" data-modify-date="2023-06-05" data-size="4.2" data-creator="赵六">
                        <div class="document-icon">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 3V15M12 19H15M12 19H9M12 19V15M21 12H15M12 15H9M12 15H15M9 21H15C17.2091 21 19 19.2091 19 17V7C19 4.79086 17.2091 3 15 3H9C6.79086 3 5 4.79086 5 7V17C5 19.2091 6.79086 21 9 21Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="document-name">项目需求说明书.pdf</div>
                        <div class="document-meta">
                            <div>2023-06-05</div>
                            <div>4.2MB</div>
                        </div>
                        <div class="document-actions">
                            <button class="btn-view">查看</button>
                            <button class="btn-download">下载</button>
                            <button class="btn-share">分享</button>
                        </div>
                    </div>
                    
                    <!-- 图片文件 -->
                    <div class="document-card" data-type="image" data-create-date="2023-06-12" data-modify-date="2023-06-12" data-size="3.7" data-creator="孙七">
                        <div class="document-icon">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M4 19.5C4 18.837 4.26339 18.2011 4.73223 17.7322C5.20107 17.2634 5.83696 17 6.5 17H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M6.5 2H20V22H6.5C5.83696 22 5.20107 21.7366 4.73223 21.2678C4.26339 20.7989 4 20.163 4 19.5V4.5C4 3.83696 4.26339 3.20107 4.73223 2.73223C5.20107 2.26339 5.83696 2 6.5 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M14 9L16 11L14 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="document-name">产品设计稿.jpg</div>
                        <div class="document-meta">
                            <div>2023-06-12</div>
                            <div>3.7MB</div>
                        </div>
                        <div class="document-actions">
                            <button class="btn-view">查看</button>
                            <button class="btn-download">下载</button>
                            <button class="btn-share">分享</button>
                        </div>
                    </div>
                </div>
                
                <div class="pagination">
                    <span class="pagination-info">共 28 个文档，每页显示 6 个</span>
                    <button class="pagination-btn" disabled>上一页</button>
                    <button class="pagination-btn active">1</button>
                    <button class="pagination-btn">2</button>
                    <button class="pagination-btn">3</button>
                    <button class="pagination-btn">4</button>
                    <button class="pagination-btn">5</button>
                    <button class="pagination-btn">下一页</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 扁平化设计 - 分享弹窗 -->
    <div class="modal-overlay" id="shareModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">分享文档</div>
                <button class="modal-close" id="closeShareModal">&times;</button>
            </div>
            
            <div class="modal-body">
                <div class="share-basic-info">
                    <div class="share-item">
                        <label class="share-item-label" for="shareName">分享名称</label>
                        <input type="text" id="shareName" class="share-input" readonly>
                    </div>
                    <div class="share-item">
                        <label class="share-item-label">分享链接</label>
                        <div class="share-link-container">
                            <input type="text" id="shareLink" class="share-input" readonly>
                            <button class="btn-secondary copy-btn" id="copyLinkBtn">复制</button>
                        </div>
                    </div>
                </div>
                
                <!-- 页签导航 -->
                <div class="share-tabs">
                    <button class="share-tab active" data-tab="internal">内部分享</button>
                    <button class="share-tab" data-tab="external">外部分享</button>
                </div>
                
                <!-- 内部分享内容 -->
                <div class="share-tab-content" id="internalShareContent">
                    <div class="share-section">
                        <label class="share-section-label">选择组织架构</label>
                        <div class="organization-tree">
                            <!-- 组织架构树 -->
                            <div class="tree-root">
                                <div class="tree-item expanded">
                                    <div class="tree-item-header">
                                        <span class="tree-toggle"></span>
                                        <input type="checkbox" class="tree-checkbox">
                                        <span class="tree-item-text">公司总部</span>
                                    </div>
                                    <div class="tree-children">
                                        <div class="tree-item">
                                            <div class="tree-item-header">
                                                <span class="tree-toggle"></span>
                                                <input type="checkbox" class="tree-checkbox">
                                                <span class="tree-item-text">技术部</span>
                                            </div>
                                            <div class="tree-children">
                                                <div class="tree-item">
                                                    <div class="tree-item-header">
                                                        <input type="checkbox" class="tree-checkbox">
                                                        <span class="tree-item-text">前端开发组</span>
                                                    </div>
                                                </div>
                                                <div class="tree-item">
                                                    <div class="tree-item-header">
                                                        <input type="checkbox" class="tree-checkbox">
                                                        <span class="tree-item-text">后端开发组</span>
                                                    </div>
                                                </div>
                                                <div class="tree-item">
                                                    <div class="tree-item-header">
                                                        <input type="checkbox" class="tree-checkbox">
                                                        <span class="tree-item-text">测试组</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="tree-item">
                                            <div class="tree-item-header">
                                                <span class="tree-toggle"></span>
                                                <input type="checkbox" class="tree-checkbox">
                                                <span class="tree-item-text">产品部</span>
                                            </div>
                                            <div class="tree-children">
                                                <div class="tree-item">
                                                    <div class="tree-item-header">
                                                        <input type="checkbox" class="tree-checkbox">
                                                        <span class="tree-item-text">产品设计组</span>
                                                    </div>
                                                </div>
                                                <div class="tree-item">
                                                    <div class="tree-item-header">
                                                        <input type="checkbox" class="tree-checkbox">
                                                        <span class="tree-item-text">产品管理组</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="tree-item">
                                            <div class="tree-item-header">
                                                <input type="checkbox" class="tree-checkbox">
                                                <span class="tree-item-text">行政部</span>
                                            </div>
                                        </div>
                                        <div class="tree-item">
                                            <div class="tree-item-header">
                                                <input type="checkbox" class="tree-checkbox">
                                                <span class="tree-item-text">财务部</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="share-section">
                        <label class="share-section-label">分享时间设置</label>
                        <div class="share-time-options">
                            <label class="time-option">
                                <input type="radio" name="internalShareTime" value="permanent" checked>
                                <span>永久有效</span>
                            </label>
                            <label class="time-option">
                                <input type="radio" name="internalShareTime" value="expiry">
                                <span>设置有效期至</span>
                                <input type="datetime-local" class="time-input" id="internalExpiryTime" disabled>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- 外部分享内容 -->
                <div class="share-tab-content" id="externalShareContent" style="display: none;">
                    <div class="share-section">
                        <label class="share-section-label">分享时间设置</label>
                        <div class="share-time-options">
                            <label class="time-option">
                                <input type="radio" name="externalShareTime" value="permanent" checked>
                                <span>永久有效</span>
                            </label>
                            <label class="time-option">
                                <input type="radio" name="externalShareTime" value="expiry">
                                <span>设置有效期至</span>
                                <input type="datetime-local" class="time-input" id="externalExpiryTime" disabled>
                            </label>
                        </div>
                    </div>
                    
                    <div class="share-section">
                        <label class="share-section-label">访问密码设置</label>
                        <div class="password-options">
                            <label class="password-option">
                                <input type="checkbox" id="enablePassword">
                                <span>启用访问密码</span>
                            </label>
                            <div class="password-input-container" style="display: none; margin-top: 10px;">
                                <input type="text" id="sharePassword" class="share-input" placeholder="请输入4-6位数字密码">
                                <span class="password-tip">4-6位数字</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="share-section">
                        <label class="share-section-label">权限设置</label>
                        <div class="permission-options">
                            <label class="permission-option">
                                <input type="checkbox" id="allowDownload" checked>
                                <span>允许下载文档</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn-secondary" id="cancelShareBtn">取消</button>
                <button class="btn-primary" id="confirmShareBtn">确定分享</button>
            </div>
        </div>
    </div>
    
    <!-- 扁平化设计 - 上传弹窗 -->
    <div class="modal-overlay" id="uploadModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">上传文档</div>
                <button class="modal-close" id="closeUploadModal">&times;</button>
            </div>
            
            <div class="modal-body">
                <div class="upload-section">
                    <div class="upload-drop-area">
                        <div class="upload-icon">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" width="48" height="48">
                                <path d="M12 5V11M12 15H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="#999" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="upload-text">
                            <p class="upload-title">拖拽文件到此处上传</p>
                            <p class="upload-subtitle">或</p>
                            <label for="fileInput" class="upload-btn">选择文件</label>
                            <input type="file" id="fileInput" multiple style="display: none;">
                        </div>
                    </div>
                    
                    <div class="upload-settings">
                        <div class="upload-item">
                            <label class="upload-item-label" for="uploadFolder">上传至文件夹</label>
                            <select id="uploadFolder" class="upload-select">
                                <option value="current">当前文件夹</option>
                                <option value="/documents">文档库</option>
                                <option value="/documents/reports">报告</option>
                                <option value="/documents/images">图片</option>
                            </select>
                        </div>
                        
                        <div class="upload-item">
                            <label class="upload-item-label">支持的文件类型</label>
                            <p class="file-types">Word (.doc, .docx), Excel (.xls, .xlsx), PowerPoint (.ppt, .pptx), PDF (.pdf), 图片 (.jpg, .jpeg, .png, .gif)</p>
                        </div>
                    </div>
                    
                    <!-- 上传队列 -->
                    <div class="upload-queue" id="uploadQueue" style="display: none;">
                        <h4>上传队列</h4>
                        <div id="uploadItems"></div>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn-secondary" id="cancelUploadBtn">取消</button>
                <button class="btn-primary" id="startUploadBtn">开始上传</button>
            </div>
        </div>
    </div>

    <!-- 新建文件夹弹窗 -->
    <div class="modal-overlay" id="createFolderModal" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3>新建文件夹</h3>
                <button class="modal-close" id="closeCreateFolderBtn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="folderName">文件夹名称</label>
                    <input type="text" id="folderName" class="form-control" placeholder="请输入文件夹名称">
                    <div class="form-hint">请输入不超过50个字符的文件夹名称</div>
                </div>
                <div class="form-group">
                    <label for="folderLocation">所属位置</label>
                    <select id="folderLocation" class="form-control">
                        <option value="/">根目录</option>
                        <option value="/company-documents/">公司文档</option>
                        <option value="/project-documents/">项目文档</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="folderDescription">描述</label>
                    <textarea id="folderDescription" class="form-control" rows="3" placeholder="可选，输入文件夹描述信息"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="cancelCreateFolderBtn">取消</button>
                <button class="btn-primary" id="confirmCreateFolderBtn">创建</button>
            </div>
        </div>
    </div>

    <!-- 扁平化设计 - 高级筛选弹窗 -->
    <div class="advanced-filter-overlay">
        <div class="advanced-filter-dialog">
            <div class="advanced-filter-header">
                <h3 class="advanced-filter-title">高级筛选</h3>
                <button class="advanced-filter-close" type="button">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
            
            <div class="advanced-filter-content">
                <!-- 两列布局的筛选条件 -->
                <div class="advanced-filter-grid">
                    <!-- 左侧列 -->
                    <div class="advanced-filter-column">
                        <!-- 文件类型筛选 -->
                        <div class="advanced-filter-group">
                            <label class="advanced-filter-label">文件类型</label>
                            <div class="advanced-filter-options">
                                <label class="advanced-filter-checkbox">
                                    <input type="checkbox" name="newFileType" value="folder">
                                    <span class="advanced-filter-checkbox-icon"></span>
                                    <span class="advanced-filter-checkbox-text">文件夹</span>
                                </label>
                                <label class="advanced-filter-checkbox">
                                    <input type="checkbox" name="newFileType" value="doc">
                                    <span class="advanced-filter-checkbox-icon"></span>
                                    <span class="advanced-filter-checkbox-text">Word文档</span>
                                </label>
                                <label class="advanced-filter-checkbox">
                                    <input type="checkbox" name="newFileType" value="sheet">
                                    <span class="advanced-filter-checkbox-icon"></span>
                                    <span class="advanced-filter-checkbox-text">Excel表格</span>
                                </label>
                                <label class="advanced-filter-checkbox">
                                    <input type="checkbox" name="newFileType" value="slide">
                                    <span class="advanced-filter-checkbox-icon"></span>
                                    <span class="advanced-filter-checkbox-text">演示文稿</span>
                                </label>
                                <label class="advanced-filter-checkbox">
                                    <input type="checkbox" name="newFileType" value="pdf">
                                    <span class="advanced-filter-checkbox-icon"></span>
                                    <span class="advanced-filter-checkbox-text">PDF文档</span>
                                </label>
                                <label class="advanced-filter-checkbox">
                                    <input type="checkbox" name="newFileType" value="image">
                                    <span class="advanced-filter-checkbox-icon"></span>
                                    <span class="advanced-filter-checkbox-text">图片文件</span>
                                </label>
                            </div>
                        </div>
                        
                        <!-- 文件大小筛选 -->
                        <div class="advanced-filter-group">
                            <label class="advanced-filter-label">文件大小</label>
                            <div class="advanced-filter-size-range">
                                <input type="number" id="newSizeMin" placeholder="最小值(MB)" min="0" step="0.1" class="advanced-filter-input">
                                <span class="advanced-filter-range-separator">至</span>
                                <input type="number" id="newSizeMax" placeholder="最大值(MB)" min="0" step="0.1" class="advanced-filter-input">
                            </div>
                        </div>
                        
                        <!-- 排序方式 -->
                        <div class="advanced-filter-group">
                            <label class="advanced-filter-label">排序方式</label>
                            <select id="newSortBy" class="advanced-filter-select">
                                <option value="name_asc">名称 (A-Z)</option>
                                <option value="name_desc">名称 (Z-A)</option>
                                <option value="date_asc">创建时间 (早-晚)</option>
                                <option value="date_desc">创建时间 (晚-早)</option>
                                <option value="size_asc">文件大小 (小-大)</option>
                                <option value="size_desc">文件大小 (大-小)</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- 右侧列 -->
                    <div class="advanced-filter-column">
                        <!-- 创建时间范围 -->
                        <div class="advanced-filter-group">
                            <label class="advanced-filter-label">创建时间范围</label>
                            <div class="advanced-filter-date-range">
                                <input type="date" id="newCreateDateStart" class="advanced-filter-input">
                                <span class="advanced-filter-range-separator">至</span>
                                <input type="date" id="newCreateDateEnd" class="advanced-filter-input">
                            </div>
                        </div>
                        
                        <!-- 修改时间范围 -->
                        <div class="advanced-filter-group">
                            <label class="advanced-filter-label">修改时间范围</label>
                            <div class="advanced-filter-date-range">
                                <input type="date" id="newModifyDateStart" class="advanced-filter-input">
                                <span class="advanced-filter-range-separator">至</span>
                                <input type="date" id="newModifyDateEnd" class="advanced-filter-input">
                            </div>
                        </div>
                        
                        <!-- 创建人 -->
                        <div class="advanced-filter-group">
                            <label class="advanced-filter-label">创建人</label>
                            <input type="text" id="newCreatorName" placeholder="输入创建人姓名" class="advanced-filter-input">
                        </div>
                        
                        <!-- 文件名关键词 -->
                        <div class="advanced-filter-group">
                            <label class="advanced-filter-label">文件名关键词</label>
                            <input type="text" id="newFileNameKeyword" placeholder="输入文件名关键词" class="advanced-filter-input">
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="advanced-filter-footer">
                <div class="advanced-filter-actions">
                    <button class="advanced-filter-btn advanced-filter-btn-reset" type="button">重置</button>
                    <div class="advanced-filter-btn-group">
                        <button class="advanced-filter-btn advanced-filter-btn-cancel" type="button">取消</button>
                        <button class="advanced-filter-btn advanced-filter-btn-apply" type="button">应用筛选</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <style>
        /* 扁平化设计风格 - 模态框基础样式 */
        .modal-overlay, .advanced-filter-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.4);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .modal, .advanced-filter-dialog {
            background-color: white;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border: 1px solid #e8e8e8;
            width: 560px;
            max-width: 90vw;
            max-height: 90vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            transform: translateY(-10px);
            opacity: 0;
            transition: transform 0.2s ease, opacity 0.2s ease;
        }
        
        .advanced-filter-dialog {
            width: 760px;
            max-width: 95vw;
        }
        
        /* 模态框头部样式 */
        .modal-header, .advanced-filter-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            border-bottom: 1px solid #e8e8e8;
            background-color: #fafafa;
        }
        
        .modal-title, .advanced-filter-title {
            margin: 0;
            font-size: 16px;
            font-weight: 500;
            color: #333;
        }
        
        .modal-close, .advanced-filter-close {
            background: none;
            border: none;
            padding: 6px;
            cursor: pointer;
            color: #999;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            width: 32px;
            height: 32px;
        }
        
        .modal-close:hover, .advanced-filter-close:hover {
            background-color: #f5f5f5;
            color: #666;
        }
        
        /* 模态框内容区域样式 */
        .modal-body, .advanced-filter-content {
            padding: 20px;
            overflow-y: auto;
            flex: 1;
        }
        
        /* 模态框底部样式 */
        .modal-footer, .advanced-filter-footer {
            padding: 12px 20px;
            border-top: 1px solid #e8e8e8;
            background-color: #fafafa;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        .advanced-filter-footer {
            justify-content: space-between;
        }
        
        /* 分享弹窗特定样式 */
        .share-basic-info {
            padding-bottom: 16px;
            margin-bottom: 16px;
            border-bottom: 1px solid #e8e8e8;
        }
        
        .share-item {
            margin-bottom: 16px;
        }
        
        .share-item:last-child {
            margin-bottom: 0;
        }
        
        .share-item-label {
            display: block;
            margin-bottom: 8px;
            color: #666;
            font-size: 14px;
            font-weight: 500;
        }
        
        .share-input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #e8e8e8;
            border-radius: 4px;
            font-size: 14px;
            transition: all 0.2s ease;
            background-color: white;
        }
        
        .share-input:focus {
            outline: none;
            border-color: #409eff;
            box-shadow: 0 0 0 2px rgba(64, 158, 255, 0.1);
        }
        
        .share-link-container {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .share-link-container .share-input {
            flex: 1;
        }
        
        /* 页签样式 */
        .share-tabs {
            display: flex;
            margin-bottom: 16px;
            border-bottom: 1px solid #e8e8e8;
        }
        
        .share-tab {
            padding: 10px 20px;
            border: none;
            background: none;
            font-size: 14px;
            cursor: pointer;
            position: relative;
            transition: all 0.2s ease;
            color: #666;
        }
        
        .share-tab:hover {
            color: #409eff;
            background-color: #f5faff;
        }
        
        .share-tab.active {
            color: #409eff;
            font-weight: 500;
            background-color: #f5faff;
        }
        
        .share-tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 2px;
            background-color: #409eff;
        }
        
        /* 分享设置部分样式 */
        .share-section {
            margin-bottom: 20px;
        }
        
        .share-section:last-child {
            margin-bottom: 0;
        }
        
        .share-section-label {
            display: block;
            margin-bottom: 12px;
            font-weight: 500;
            color: #666;
            font-size: 14px;
        }
        
        /* 组织架构树样式 */
        .organization-tree {
            max-height: 280px;
            overflow-y: auto;
            border: 1px solid #e8e8e8;
            border-radius: 4px;
            padding: 10px;
            background-color: #fafafa;
        }
        
        .tree-root {
            font-size: 14px;
        }
        
        .tree-item {
            margin-bottom: 2px;
        }
        
        .tree-item-header {
            display: flex;
            align-items: center;
            padding: 6px 8px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        
        .tree-item-header:hover {
            background-color: #f5faff;
        }
        
        .tree-toggle {
            width: 16px;
            height: 16px;
            margin-right: 6px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23666' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M9 18l6-6-6-6'%3E%3C/path%3E%3C/svg%3E");
            background-size: 12px;
            background-position: center;
            background-repeat: no-repeat;
            transition: transform 0.2s ease;
        }
        
        .tree-item.expanded .tree-toggle {
            transform: rotate(90deg);
        }
        
        .tree-checkbox {
            margin-right: 8px;
            cursor: pointer;
            width: 16px;
            height: 16px;
        }
        
        .tree-item-text {
            flex: 1;
        }
        
        .tree-children {
            margin-left: 24px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        
        .tree-item.expanded > .tree-children {
            max-height: 1000px;
        }
        
        /* 时间和密码选项样式 */
        .share-time-options, .password-options, .permission-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .time-option, .password-option, .permission-option {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 8px;
            border-radius: 4px;
            transition: background-color 0.2s ease;
        }
        
        .time-option:hover, .password-option:hover, .permission-option:hover {
            background-color: #f5f5f5;
        }
        
        .time-option input[type="radio"], .password-option input[type="checkbox"], .permission-option input[type="checkbox"] {
            margin-right: 8px;
        }
        
        .time-input {
            margin-left: 8px;
            padding: 8px 10px;
            border: 1px solid #e8e8e8;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .password-input-container {
            padding-left: 24px;
        }
        
        .password-tip {
            margin-left: 10px;
            font-size: 12px;
            color: #999;
        }
        
        /* 高级筛选弹窗特定样式 */
        .advanced-filter-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .advanced-filter-column {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        .advanced-filter-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .advanced-filter-label {
            font-weight: 500;
            color: #666;
            font-size: 14px;
        }
        
        .advanced-filter-options {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .advanced-filter-checkbox {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 8px;
            border-radius: 4px;
            transition: all 0.2s ease;
        }
        
        .advanced-filter-checkbox:hover {
            color: #409eff;
            background-color: #f5faff;
        }
        
        .advanced-filter-checkbox input[type="checkbox"] {
            display: none;
        }
        
        .advanced-filter-checkbox-icon {
            width: 16px;
            height: 16px;
            border: 1px solid #e8e8e8;
            border-radius: 4px;
            margin-right: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }
        
        .advanced-filter-checkbox input[type="checkbox"]:checked + .advanced-filter-checkbox-icon {
            background-color: #409eff;
            border-color: #409eff;
        }
        
        .advanced-filter-checkbox input[type="checkbox"]:checked + .advanced-filter-checkbox-icon::after {
            content: '';
            width: 6px;
            height: 10px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
        }
        
        .advanced-filter-date-range, .advanced-filter-size-range {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .advanced-filter-range-separator {
            color: #999;
            font-size: 14px;
        }
        
        .advanced-filter-input, .advanced-filter-select {
            flex: 1;
            padding: 10px 12px;
            border: 1px solid #e8e8e8;
            border-radius: 4px;
            font-size: 14px;
            transition: all 0.2s ease;
            background-color: white;
        }
        
        .advanced-filter-input:focus, .advanced-filter-select:focus {
            outline: none;
            border-color: #409eff;
            box-shadow: 0 0 0 2px rgba(64, 158, 255, 0.1);
        }
        
        .advanced-filter-input::placeholder {
            color: #ccc;
        }
        
        /* 按钮样式 - 扁平化设计 */
        .btn-primary, .btn-secondary, .advanced-filter-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }
        
        .btn-primary, .advanced-filter-btn-apply {
            background-color: #409eff;
            color: white;
        }
        
        .btn-primary:hover, .advanced-filter-btn-apply:hover {
            background-color: #66b1ff;
        }
        
        .btn-secondary, .advanced-filter-btn-cancel {
            background-color: white;
            color: #666;
            border: 1px solid #e8e8e8;
        }
        
        .btn-secondary:hover, .advanced-filter-btn-cancel:hover {
            border-color: #409eff;
            color: #409eff;
        }
        
        .advanced-filter-btn-reset {
            background-color: #f5f5f5;
            color: #666;
        }
        
        .advanced-filter-btn-reset:hover {
            background-color: #ebebeb;
        }
        
        .advanced-filter-btn-group {
            display: flex;
            gap: 10px;
        }
        
        /* 响应式设计 */
        @media (max-width: 768px) {
            .modal, .advanced-filter-dialog {
                width: 95vw;
                margin: 20px;
            }
            
            .advanced-filter-grid {
                grid-template-columns: 1fr;
            }
            
            .advanced-filter-date-range, .advanced-filter-size-range {
                flex-direction: column;
                align-items: stretch;
            }
            
            .advanced-filter-range-separator {
                text-align: center;
            }
            
            .advanced-filter-actions {
                flex-direction: column-reverse;
                gap: 12px;
            }
            
            .advanced-filter-btn-group {
                width: 100%;
                justify-content: space-between;
            }
            
            .modal-footer {
                flex-wrap: wrap;
            }
            
            .modal-footer button, .advanced-filter-btn {
                flex: 1;
                min-width: 120px;
            }
            
            /* 上传弹窗样式 */
            .upload-section {
                display: flex;
                flex-direction: column;
                gap: 20px;
            }
            
            .upload-drop-area {
                border: 2px dashed #e8e8e8;
                border-radius: 4px;
                padding: 40px 20px;
                text-align: center;
                cursor: pointer;
                transition: all 0.2s ease;
                background-color: #fafafa;
            }
            
            .upload-drop-area:hover {
                border-color: #409eff;
                background-color: #f0f9ff;
            }
            
            /* 拖拽高亮效果 */
            .upload-drop-area.highlight {
                border-color: #67c23a;
                background-color: #f6ffed;
            }
            
            .upload-icon {
                margin-bottom: 16px;
                opacity: 0.6;
            }
            
            .upload-text {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 8px;
            }
            
            .upload-title {
                font-size: 16px;
                font-weight: 500;
                color: #333;
                margin: 0;
            }
            
            .upload-subtitle {
                font-size: 14px;
                color: #666;
                margin: 0;
            }
            
            .upload-btn {
                display: inline-block;
                padding: 8px 16px;
                background-color: #409eff;
                color: white;
                border-radius: 4px;
                cursor: pointer;
                font-size: 14px;
                transition: all 0.2s ease;
            }
            
            .upload-btn:hover {
                background-color: #66b1ff;
            }
            
            .upload-settings {
                display: flex;
                flex-direction: column;
                gap: 16px;
            }
            
            .upload-item {
                display: flex;
                flex-direction: column;
                gap: 8px;
            }
            
            .upload-item-label {
                font-size: 14px;
                color: #333;
                font-weight: 500;
            }
            
            .upload-select {
                padding: 8px 12px;
                border: 1px solid #e8e8e8;
                border-radius: 4px;
                background-color: white;
                font-size: 14px;
                transition: all 0.2s ease;
            }
            
            .upload-select:focus {
                outline: none;
                border-color: #409eff;
                box-shadow: 0 0 0 2px rgba(64, 158, 255, 0.2);
            }
            
            .file-types {
                font-size: 12px;
                color: #666;
                margin: 0;
                line-height: 1.5;
            }
            
            .upload-queue {
                margin-top: 20px;
            }
            
            .upload-queue h4 {
                font-size: 14px;
                font-weight: 500;
                color: #333;
                margin: 0 0 12px 0;
            }
            
            .upload-item {
                display: flex;
                align-items: center;
                padding: 12px;
                border: 1px solid #e8e8e8;
                border-radius: 4px;
                margin-bottom: 8px;
                background-color: white;
            }
            
            .upload-item-info {
                flex: 1;
            }
            
            .upload-item-name {
                font-size: 14px;
                color: #333;
                margin: 0 0 4px 0;
            }
            
            .upload-item-progress {
                width: 100%;
                height: 6px;
                background-color: #f0f0f0;
                border-radius: 3px;
                overflow: hidden;
                margin-bottom: 4px;
            }
            
            .upload-item-progress-bar {
                height: 100%;
                background-color: #409eff;
                border-radius: 3px;
                width: 0;
                transition: width 0.3s ease;
            }
            
            .upload-item-status {
                font-size: 12px;
                color: #666;
            }
            
            .upload-item-size {
                font-size: 12px;
                color: #999;
                margin-left: 12px;
            }
            
            .upload-item-cancel {
                background: none;
                border: none;
                color: #999;
                cursor: pointer;
                margin-left: 8px;
                font-size: 16px;
                width: 24px;
                height: 24px;
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 4px;
                transition: all 0.2s ease;
            }
            
            .upload-item-cancel:hover {
                background-color: #f5f5f5;
                color: #666;
            }
        }
    </style>

    <script src="../JS/common.js"></script>
    <script src="../JS/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 当前路径
            let currentPath = '/';
            let currentPathName = '文档库';
            
            // 消息提示函数（如果common.js中没有提供）
            function showMessage(message, type = 'info') {
                // 创建消息元素
                const messageElement = document.createElement('div');
                messageElement.className = `message notification-${type}`;
                messageElement.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    padding: 12px 20px;
                    border-radius: 6px;
                    color: white;
                    font-size: 14px;
                    z-index: 2000;
                    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
                    transform: translateX(100%);
                    opacity: 0;
                    transition: all 0.3s ease;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    max-width: 350px;
                `;
                
                // 根据类型设置背景色
                if (type === 'success') {
                    messageElement.style.backgroundColor = '#67c23a';
                } else if (type === 'error') {
                    messageElement.style.backgroundColor = '#f56c6c';
                } else if (type === 'warning') {
                    messageElement.style.backgroundColor = '#e6a23c';
                } else {
                    messageElement.style.backgroundColor = '#409eff';
                }
                
                // 设置消息内容
                messageElement.textContent = message;
                document.body.appendChild(messageElement);
                
                // 显示消息
                setTimeout(() => {
                    messageElement.style.transform = 'translateX(0)';
                    messageElement.style.opacity = '1';
                }, 10);
                
                // 3秒后隐藏消息
                setTimeout(() => {
                    messageElement.style.transform = 'translateX(100%)';
                    messageElement.style.opacity = '0';
                    setTimeout(() => {
                        document.body.removeChild(messageElement);
                    }, 300);
                }, 3000);
            }
            
            // 上传文档按钮 - 仅作为展示元素，移除了交互功能
            // document.querySelector('.btn-primary').addEventListener('click', function() {
            //     // 显示上传弹窗
            //     const uploadModal = document.getElementById('uploadModal');
            //     uploadModal.style.display = 'flex';
            //     setTimeout(() => {
            //         const modalContent = uploadModal.querySelector('.modal');
            //         if (modalContent) {
            //             modalContent.style.transform = 'translateY(0)';
            //             modalContent.style.opacity = '1';
            //         }
            //     }, 10);
            //     // 阻止背景滚动
            //     document.body.style.overflow = 'hidden';
            // });
            
            // 初始化上传弹窗样式
            const uploadModalContent = document.getElementById('uploadModal').querySelector('.modal');
            if (uploadModalContent) {
                uploadModalContent.style.transition = 'all 0.2s ease';
                uploadModalContent.style.transform = 'translateY(-10px)';
                uploadModalContent.style.opacity = '0';
            }
            
            // 上传弹窗功能实现
            // 获取上传弹窗相关元素
            const uploadModal = document.getElementById('uploadModal');
            const closeUploadModalBtn = document.getElementById('closeUploadModal');
            const cancelUploadBtn = document.getElementById('cancelUploadBtn');
            const fileInput = document.getElementById('fileInput');
            const uploadDropArea = document.querySelector('.upload-drop-area');
            const uploadQueue = document.getElementById('uploadQueue');
            const uploadItems = document.getElementById('uploadItems');
            const startUploadBtn = document.getElementById('startUploadBtn');
            
            // 关闭上传弹窗
            function closeUploadModal() {
                const modalContent = uploadModal.querySelector('.modal');
                if (modalContent) {
                    modalContent.style.transform = 'translateY(-10px)';
                    modalContent.style.opacity = '0';
                    setTimeout(() => {
                        uploadModal.style.display = 'none';
                        // 重置弹窗样式以便下次打开
                        modalContent.style.transform = 'translateY(-10px)';
                        modalContent.style.opacity = '0';
                        // 恢复背景滚动
                        document.body.style.overflow = '';
                        // 清空上传队列
                        clearUploadQueue();
                    }, 200);
                }
            }
            
            // 绑定关闭弹窗事件
            closeUploadModalBtn.addEventListener('click', closeUploadModal);
            cancelUploadBtn.addEventListener('click', closeUploadModal);
            
            // 点击模态框外部关闭弹窗
            uploadModal.addEventListener('click', function(e) {
                if (e.target === this) {
                    closeUploadModal();
                }
            });
            
            // 点击选择文件
            uploadDropArea.addEventListener('click', function() {
                fileInput.click();
            });
            
            // 文件选择事件
            fileInput.addEventListener('change', function() {
                if (this.files.length > 0) {
                    handleFiles(this.files);
                }
            });
            
            // 拖拽上传功能
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                uploadDropArea.addEventListener(eventName, preventDefaults, false);
            });
            
            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }
            
            ['dragenter', 'dragover'].forEach(eventName => {
                uploadDropArea.addEventListener(eventName, highlight, false);
            });
            
            ['dragleave', 'drop'].forEach(eventName => {
                uploadDropArea.addEventListener(eventName, unhighlight, false);
            });
            
            function highlight() {
                uploadDropArea.classList.add('highlight');
            }
            
            function unhighlight() {
                uploadDropArea.classList.remove('highlight');
            }
            
            // 处理拖拽的文件
            uploadDropArea.addEventListener('drop', function(e) {
                const dt = e.dataTransfer;
                const files = dt.files;
                handleFiles(files);
            });
            
            // 处理选择的文件
            function handleFiles(files) {
                // 显示上传队列
                uploadQueue.style.display = 'block';
                
                // 将类数组对象转换为数组
                Array.from(files).forEach(file => {
                    addFileToQueue(file);
                });
            }
            
            // 将文件添加到上传队列
            function addFileToQueue(file) {
                // 检查文件类型
                const validTypes = [
                    'application/msword',
                    'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
                    'application/vnd.ms-excel',
                    'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
                    'application/vnd.ms-powerpoint',
                    'application/vnd.openxmlformats-officedocument.presentationml.presentation',
                    'application/pdf',
                    'image/jpeg',
                    'image/png',
                    'image/gif'
                ];
                
                if (!validTypes.includes(file.type)) {
                    showMessage(`文件类型不支持: ${file.name}`, 'error');
                    return;
                }
                
                // 创建文件项
                const fileItem = document.createElement('div');
                fileItem.className = 'upload-item';
                fileItem.dataset.fileName = file.name;
                
                // 格式化文件大小
                const fileSize = formatFileSize(file.size);
                
                // 设置文件项内容
                fileItem.innerHTML = `
                    <div class="upload-item-info">
                        <p class="upload-item-name">${file.name}</p>
                        <div class="upload-item-progress">
                            <div class="upload-item-progress-bar" style="width: 0%"></div>
                        </div>
                        <span class="upload-item-status">等待上传</span>
                    </div>
                    <span class="upload-item-size">${fileSize}</span>
                    <button class="upload-item-cancel" title="取消上传">&times;</button>
                `;
                
                // 添加到队列
                uploadItems.appendChild(fileItem);
                
                // 绑定取消按钮事件
                const cancelBtn = fileItem.querySelector('.upload-item-cancel');
                cancelBtn.addEventListener('click', function() {
                    fileItem.remove();
                    // 如果队列为空，隐藏队列
                    if (uploadItems.children.length === 0) {
                        uploadQueue.style.display = 'none';
                    }
                });
            }
            
            // 格式化文件大小
            function formatFileSize(bytes) {
                if (bytes === 0) return '0 Bytes';
                
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }
            
            // 开始上传
            startUploadBtn.addEventListener('click', function() {
                const queueItems = uploadItems.querySelectorAll('.upload-item');
                
                if (queueItems.length === 0) {
                    showMessage('请先选择要上传的文件', 'info');
                    return;
                }
                
                // 禁用开始上传按钮
                startUploadBtn.disabled = true;
                startUploadBtn.textContent = '上传中...';
                
                // 模拟上传每个文件
                let uploadedCount = 0;
                
                queueItems.forEach((item, index) => {
                    // 延迟开始上传，模拟排队效果
                    setTimeout(() => {
                        simulateUpload(item);
                        
                        // 增加已上传计数
                        uploadedCount++;
                        
                        // 检查是否全部上传完成
                        if (uploadedCount === queueItems.length) {
                            setTimeout(() => {
                                // 恢复开始上传按钮状态
                                startUploadBtn.disabled = false;
                                startUploadBtn.textContent = '开始上传';
                                
                                // 显示上传完成消息
                                showMessage(`成功上传 ${uploadedCount} 个文件`, 'success');
                                
                                // 关闭上传弹窗
                                closeUploadModal();
                            }, 500);
                        }
                    }, index * 1000);
                });
            });
            
            // 模拟文件上传
            function simulateUpload(fileItem) {
                const progressBar = fileItem.querySelector('.upload-item-progress-bar');
                const statusText = fileItem.querySelector('.upload-item-status');
                const cancelBtn = fileItem.querySelector('.upload-item-cancel');
                
                // 禁用取消按钮
                cancelBtn.disabled = true;
                
                let progress = 0;
                const interval = setInterval(() => {
                    // 随机增加进度，模拟真实上传速度
                    progress += Math.random() * 15;
                    
                    if (progress >= 100) {
                        progress = 100;
                        clearInterval(interval);
                        statusText.textContent = '上传完成';
                        statusText.style.color = '#67c23a'; // 成功颜色
                    }
                    
                    // 更新进度条
                    progressBar.style.width = progress + '%';
                    statusText.textContent = `上传中 (${Math.round(progress)}%)`;
                }, 200);
            }
            
            // 清空上传队列
            function clearUploadQueue() {
                uploadItems.innerHTML = '';
                uploadQueue.style.display = 'none';
                fileInput.value = '';
            }
            
            // 高级筛选弹窗 - 扁平化设计实现
            // 获取高级筛选弹窗元素
            const filterOverlay = document.querySelector('.advanced-filter-overlay');
            const filterCloseBtn = document.querySelector('.advanced-filter-close');
            const filterResetBtn = document.querySelector('.advanced-filter-btn-reset');
            const filterCancelBtn = document.querySelector('.advanced-filter-btn-cancel');
            const filterApplyBtn = document.querySelector('.advanced-filter-btn-apply');
            
            // 高级筛选按钮 - 仅作为展示元素，移除了交互功能
            // document.querySelectorAll('.btn-secondary')[1].addEventListener('click', function() {
            //     filterOverlay.style.display = 'flex';
            //     setTimeout(() => {
            //         const dialog = filterOverlay.querySelector('.advanced-filter-dialog');
            //         if (dialog) {
            //             dialog.style.transform = 'translateY(0)';
            //             dialog.style.opacity = '1';
            //         }
            //     }, 10);
            //     // 阻止背景滚动
            //     document.body.style.overflow = 'hidden';
            // });
            
            // 关闭高级筛选弹窗
            function closeFilterOverlay() {
                const dialog = filterOverlay.querySelector('.advanced-filter-dialog');
                if (dialog) {
                    dialog.style.transform = 'translateY(-10px)';
                    dialog.style.opacity = '0';
                    setTimeout(() => {
                        filterOverlay.style.display = 'none';
                        // 重置弹窗样式以便下次打开
                        dialog.style.transform = 'translateY(-10px)';
                        dialog.style.opacity = '0';
                        // 恢复背景滚动
                        document.body.style.overflow = '';
                    }, 200);
                }
            }
            
            // 绑定关闭弹窗事件
            filterCloseBtn.addEventListener('click', closeFilterOverlay);
            filterCancelBtn.addEventListener('click', closeFilterOverlay);
            
            // 点击模态框外部关闭弹窗
            filterOverlay.addEventListener('click', function(e) {
                if (e.target === this) {
                    closeFilterOverlay();
                }
            });
            
            // 重置筛选条件
            filterResetBtn.addEventListener('click', function() {
                // 重置文件类型选择
                document.querySelectorAll('input[name="newFileType"]').forEach(checkbox => {
                    checkbox.checked = false;
                });
                
                // 重置日期输入
                document.getElementById('newCreateDateStart').value = '';
                document.getElementById('newCreateDateEnd').value = '';
                document.getElementById('newModifyDateStart').value = '';
                document.getElementById('newModifyDateEnd').value = '';
                
                // 重置文件大小输入
                document.getElementById('newSizeMin').value = '';
                document.getElementById('newSizeMax').value = '';
                
                // 重置文本输入
                document.getElementById('newCreatorName').value = '';
                document.getElementById('newFileNameKeyword').value = '';
                
                // 重置排序方式
                document.getElementById('newSortBy').value = 'name_asc';
                
                showMessage('筛选条件已重置', 'info');
            });
            
            // 应用筛选条件
            filterApplyBtn.addEventListener('click', function() {
                // 获取筛选条件
                const selectedTypes = Array.from(document.querySelectorAll('input[name="newFileType"]:checked')).map(checkbox => checkbox.value);
                const createDateStart = document.getElementById('newCreateDateStart').value;
                const createDateEnd = document.getElementById('newCreateDateEnd').value;
                const modifyDateStart = document.getElementById('newModifyDateStart').value;
                const modifyDateEnd = document.getElementById('newModifyDateEnd').value;
                const sizeMin = document.getElementById('newSizeMin').value;
                const sizeMax = document.getElementById('newSizeMax').value;
                const creatorName = document.getElementById('newCreatorName').value;
                const fileNameKeyword = document.getElementById('newFileNameKeyword').value;
                const sortBy = document.getElementById('newSortBy').value;
                
                // 收集所有活跃的筛选条件，用于显示消息
                let activeFilters = [];
                if (selectedTypes.length > 0) {
                    activeFilters.push(`文件类型(${selectedTypes.length}个)`);
                }
                if (createDateStart || createDateEnd) {
                    activeFilters.push('创建时间范围');
                }
                if (modifyDateStart || modifyDateEnd) {
                    activeFilters.push('修改时间范围');
                }
                if (sizeMin || sizeMax) {
                    activeFilters.push('文件大小范围');
                }
                if (creatorName) {
                    activeFilters.push('创建人');
                }
                if (fileNameKeyword) {
                    activeFilters.push('文件名关键词');
                }
                
                // 模拟应用筛选
                const contentArea = document.querySelector('.document-content');
                contentArea.style.opacity = '0.6';
                
                setTimeout(() => {
                    // 关闭筛选弹窗
                    closeFilterOverlay();
                    
                    // 显示筛选结果消息
                    if (activeFilters.length > 0) {
                        showMessage(`已应用筛选条件: ${activeFilters.join(', ')}`, 'success');
                    } else {
                        showMessage('未设置筛选条件', 'info');
                    }
                    
                    contentArea.style.opacity = '1';
                }, 500);
                
                // 调用高级筛选函数
                applyAdvancedFilter(selectedTypes, createDateStart, createDateEnd, modifyDateStart, modifyDateEnd, sizeMin, sizeMax, creatorName, fileNameKeyword, sortBy);
            });
            
            // 高级筛选函数 - 实际筛选文档卡片
            function applyAdvancedFilter(selectedTypes, createDateStart, createDateEnd, modifyDateStart, modifyDateEnd, sizeMin, sizeMax, creatorName, fileNameKeyword, sortBy) {
                const documentCards = document.querySelectorAll('.document-card');
                const filteredCards = [];
                
                // 遍历所有文档卡片进行筛选
                documentCards.forEach(card => {
                    // 重置卡片显示状态
                    card.style.opacity = '0';
                    card.style.transform = 'scale(0.95)';
                    
                    // 获取卡片的属性值
                    const cardType = card.getAttribute('data-type');
                    const cardCreateDate = card.getAttribute('data-create-date');
                    const cardModifyDate = card.getAttribute('data-modify-date');
                    const cardSize = parseFloat(card.getAttribute('data-size') || '0');
                    const cardCreator = card.getAttribute('data-creator') || '';
                    const cardFileName = card.querySelector('.document-name').textContent.toLowerCase();
                    
                    // 文件类型筛选
                    let typeMatch = true;
                    if (selectedTypes && selectedTypes.length > 0) {
                        typeMatch = selectedTypes.includes(cardType);
                    }
                    
                    // 创建时间筛选
                    let createDateMatch = true;
                    if (createDateStart) {
                        createDateMatch = cardCreateDate && cardCreateDate >= createDateStart;
                    }
                    if (createDateEnd) {
                        createDateMatch = createDateMatch && cardCreateDate && cardCreateDate <= createDateEnd;
                    }
                    
                    // 修改时间筛选
                    let modifyDateMatch = true;
                    if (modifyDateStart) {
                        modifyDateMatch = cardModifyDate && cardModifyDate >= modifyDateStart;
                    }
                    if (modifyDateEnd) {
                        modifyDateMatch = modifyDateMatch && cardModifyDate && cardModifyDate <= modifyDateEnd;
                    }
                    
                    // 文件大小筛选
                    let sizeMatch = true;
                    if (sizeMin !== '') {
                        sizeMatch = cardSize >= parseFloat(sizeMin);
                    }
                    if (sizeMax !== '') {
                        sizeMatch = sizeMatch && cardSize <= parseFloat(sizeMax);
                    }
                    
                    // 创建人筛选
                    let creatorMatch = true;
                    if (creatorName) {
                        creatorMatch = cardCreator.toLowerCase().includes(creatorName.toLowerCase());
                    }
                    
                    // 文件名关键词筛选
                    let fileNameMatch = true;
                    if (fileNameKeyword) {
                        fileNameMatch = cardFileName.includes(fileNameKeyword.toLowerCase());
                    }
                    
                    // 综合所有筛选条件
                    const isMatch = typeMatch && createDateMatch && modifyDateMatch && sizeMatch && creatorMatch && fileNameMatch;
                    
                    if (isMatch) {
                        // 符合条件的卡片加入筛选结果
                        filteredCards.push({ card, createDate: cardCreateDate, size: cardSize, name: cardFileName });
                    } else {
                        // 不符合条件的卡片隐藏
                        setTimeout(() => {
                            card.style.display = 'none';
                        }, 300);
                    }
                });
                
                // 排序筛选结果
                if (sortBy && filteredCards.length > 0) {
                    switch (sortBy) {
                        case 'name_asc':
                            filteredCards.sort((a, b) => a.name.localeCompare(b.name));
                            break;
                        case 'name_desc':
                            filteredCards.sort((a, b) => b.name.localeCompare(a.name));
                            break;
                        case 'date_asc':
                            filteredCards.sort((a, b) => new Date(a.createDate) - new Date(b.createDate));
                            break;
                        case 'date_desc':
                            filteredCards.sort((a, b) => new Date(b.createDate) - new Date(a.createDate));
                            break;
                        case 'size_asc':
                            filteredCards.sort((a, b) => a.size - b.size);
                            break;
                        case 'size_desc':
                            filteredCards.sort((a, b) => b.size - a.size);
                            break;
                    }
                }
                
                // 显示筛选结果
                filteredCards.forEach((item, index) => {
                    // 延迟显示卡片，创造级联效果
                    setTimeout(() => {
                        item.card.style.display = 'block';
                        setTimeout(() => {
                            item.card.style.opacity = '1';
                            item.card.style.transform = 'scale(1)';
                        }, 10);
                    }, index * 50);
                });
                
                // 更新分页信息
                const paginationInfo = document.querySelector('.pagination-info');
                if (paginationInfo) {
                    paginationInfo.textContent = `共 ${filteredCards.length} 个文档，每页显示 6 个`;
                }
            }
            
            // 标签页切换事件 - 优化动画效果
            document.querySelectorAll('.tab-item').forEach(tab => {
                tab.addEventListener('click', function() {
                    // 添加切换前的淡出效果
                    const contentArea = document.querySelector('.document-content');
                    contentArea.style.opacity = '0.6';
                    
                    // 移除所有活动标签
                    document.querySelectorAll('.tab-item').forEach(t => {
                        t.classList.remove('active');
                    });
                    
                    // 设置当前标签为活动状态
                    this.classList.add('active');
                    
                    // 触发文件筛选
                    const tabText = this.textContent.trim();
                    filterFilesByTab(tabText);
                    
                    // 添加内容加载完成的淡入效果
                    setTimeout(() => {
                        contentArea.style.opacity = '1';
                    }, 200);
                });
            });
            
            // 树形结构切换事件 - 添加流畅的展开/折叠动画
            document.querySelectorAll('.tree-toggle').forEach(toggle => {
                toggle.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const parentNode = this.closest('.tree-node');
                    const children = parentNode.querySelector('.tree-node-children');
                    if (children) {
                        children.classList.toggle('expanded');
                        this.classList.toggle('expanded');
                    }
                });
            });
            
            // 树形节点点击事件 - 优化选中效果和内容加载
            document.querySelectorAll('.tree-node').forEach(node => {
                node.addEventListener('click', function() {
                    const path = this.getAttribute('data-path');
                    const nodeName = this.querySelector('.tree-node-content').textContent.trim();
                    
                    // 更新当前路径
                    currentPath = path;
                    currentPathName = nodeName;
                    
                    // 更新活动节点样式
                    document.querySelectorAll('.tree-node').forEach(n => {
                        n.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    // 添加点击波纹效果
                    const ripple = document.createElement('span');
                    ripple.classList.add('ripple-effect');
                    ripple.style.cssText = `
                        position: absolute;
                        background-color: rgba(64, 158, 255, 0.3);
                        border-radius: 50%;
                        transform: scale(0);
                        animation: ripple-animation 0.6s linear;
                        pointer-events: none;
                    `;
                    this.appendChild(ripple);
                    
                    // 计算波纹位置
                    const rect = this.getBoundingClientRect();
                    const x = event.clientX - rect.left;
                    const y = event.clientY - rect.top;
                    ripple.style.left = x + 'px';
                    ripple.style.top = y + 'px';
                    
                    // 移除波纹元素
                    setTimeout(() => {
                        ripple.remove();
                    }, 600);
                    
                    // 更新面包屑导航
                    updateBreadcrumb(path, nodeName);
                    
                    // 模拟内容加载
                    const contentArea = document.querySelector('.document-content');
                    contentArea.style.opacity = '0.6';
                    
                    setTimeout(() => {
                        // 这里可以根据路径加载不同的内容
                        showMessage(`已切换至${nodeName}`, 'success');
                        contentArea.style.opacity = '1';
                    }, 300);
                });
            });
            
            // 面包屑导航点击事件
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('breadcrumb-item') && !e.target.classList.contains('active')) {
                    const path = e.target.getAttribute('data-path');
                    const nodeName = e.target.textContent.trim();
                    
                    // 查找对应的树形节点并点击
                    const treeNode = document.querySelector(`.tree-node[data-path="${path}"]`);
                    if (treeNode) {
                        // 展开所有父节点
                        let parent = treeNode.parentElement;
                        while (parent && parent.classList.contains('tree-node-children')) {
                            parent.classList.add('expanded');
                            const toggle = parent.previousElementSibling;
                            if (toggle && toggle.classList.contains('tree-toggle')) {
                                toggle.classList.add('expanded');
                            }
                            parent = parent.parentElement.parentElement;
                        }
                        
                        // 触发点击事件
                        treeNode.click();
                    }
                }
            });
            
            // 文件夹卡片点击事件
            document.querySelectorAll('.folder-card').forEach(card => {
                card.addEventListener('click', function(e) {
                    // 如果点击的是按钮，不触发卡片点击事件
                    if (e.target.tagName === 'BUTTON' || e.target.closest('button')) {
                        return;
                    }
                    const path = this.getAttribute('data-path');
                    const name = this.querySelector('.document-name').textContent;
                    
                    // 查找对应的树形节点并点击
                    const treeNode = document.querySelector(`.tree-node[data-path="${path}"]`);
                    if (treeNode) {
                        treeNode.click();
                    }
                });
            });
            
            // 文档卡片点击事件
            document.querySelectorAll('.document-card:not(.folder-card)').forEach(card => {
                card.addEventListener('click', function(e) {
                    // 如果点击的是按钮，不触发卡片点击事件
                    if (e.target.tagName === 'BUTTON' || e.target.closest('button')) {
                        return;
                    }
                    const name = this.querySelector('.document-name').textContent;
                    showMessage(`查看文档 ${name} 功能尚未实现`, 'info');
                });
            });
            
            // 查看按钮点击事件
            document.querySelectorAll('.btn-view').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const card = this.closest('.document-card');
                    const name = card.querySelector('.document-name').textContent;
                    
                    if (card.classList.contains('folder-card')) {
                        const path = card.getAttribute('data-path');
                        const treeNode = document.querySelector(`.tree-node[data-path="${path}"]`);
                        if (treeNode) {
                            treeNode.click();
                        }
                    } else {
                        showMessage(`在线查看文档 ${name} 功能尚未实现`, 'info');
                    }
                });
            });
            
            // 下载按钮点击事件
            document.querySelectorAll('.btn-download').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const name = this.closest('.document-card').querySelector('.document-name').textContent;
                    showMessage(`下载文档 ${name} 功能尚未实现`, 'info');
                });
            });
            
            // 分享按钮点击事件
            document.querySelectorAll('.btn-share').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const card = this.closest('.document-card');
                    const name = card.querySelector('.document-name').textContent;
                    const type = card.getAttribute('data-type');
                    
                    // 设置分享弹窗内容
                    document.getElementById('shareName').value = name;
                    document.getElementById('shareLink').value = `http://localhost:8000/shared/${name.replace(/\s+/g, '_')}`;
                    
                    // 显示分享弹窗 - 添加淡入动画
                    const shareModal = document.getElementById('shareModal');
                    shareModal.style.display = 'flex';
                    setTimeout(() => {
                        shareModal.querySelector('.modal').style.transform = 'translateY(0)';
                        shareModal.querySelector('.modal').style.opacity = '1';
                    }, 10);
                });
            });
            
            // 关闭分享弹窗 - 添加淡出动画
            function closeShareModal() {
                const shareModal = document.getElementById('shareModal');
                const modalContent = shareModal.querySelector('.modal');
                modalContent.style.transform = 'translateY(-10px)';
                modalContent.style.opacity = '0';
                setTimeout(() => {
                    shareModal.style.display = 'none';
                    // 重置弹窗样式以便下次打开
                    modalContent.style.transform = 'translateY(-10px)';
                    modalContent.style.opacity = '0';
                }, 200);
            }
            
            document.getElementById('closeShareModal').addEventListener('click', closeShareModal);
            document.getElementById('cancelShareBtn').addEventListener('click', closeShareModal);
            
            // 复制链接按钮 - 优化复制反馈
            document.getElementById('copyLinkBtn').addEventListener('click', function() {
                const shareLink = document.getElementById('shareLink');
                shareLink.select();
                
                try {
                    // 使用现代的 Clipboard API
                    if (navigator.clipboard && window.isSecureContext) {
                        navigator.clipboard.writeText(shareLink.value).then(() => {
                            showMessage('链接已复制到剪贴板', 'success');
                            
                            // 添加按钮点击反馈
                            this.textContent = '已复制!';
                            this.style.backgroundColor = '#67c23a';
                            this.style.color = 'white';
                            
                            setTimeout(() => {
                                this.textContent = '复制';
                                this.style.backgroundColor = '';
                                this.style.color = '';
                            }, 2000);
                        });
                    } else {
                        // 降级方案
                        document.execCommand('copy');
                        showMessage('链接已复制到剪贴板', 'success');
                    }
                } catch (err) {
                    showMessage('复制失败，请手动复制', 'error');
                }
            });
            
            // 分享弹窗页签切换功能
            document.querySelectorAll('.share-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    
                    // 更新页签状态
                    document.querySelectorAll('.share-tab').forEach(t => {
                        t.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    // 显示对应的内容区域
                    document.querySelectorAll('.share-tab-content').forEach(content => {
                        content.style.display = 'none';
                    });
                    document.getElementById(`${tabName}ShareContent`).style.display = 'block';
                });
            });
            
            // 组织架构树展开/折叠功能
            document.querySelectorAll('.tree-toggle').forEach(toggle => {
                toggle.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const treeItem = this.closest('.tree-item');
                    treeItem.classList.toggle('expanded');
                });
            });
            
            // 组织架构树复选框功能
            document.querySelectorAll('.tree-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', function(e) {
                    e.stopPropagation();
                    const treeItem = this.closest('.tree-item');
                    const isChecked = this.checked;
                    
                    // 同步子节点的选中状态
                    const childCheckboxes = treeItem.querySelectorAll('.tree-children .tree-checkbox');
                    childCheckboxes.forEach(childCheckbox => {
                        childCheckbox.checked = isChecked;
                    });
                    
                    // 如果当前节点被选中，自动展开父节点
                    if (isChecked) {
                        let parentNode = treeItem.parentElement.closest('.tree-item');
                        while (parentNode) {
                            parentNode.classList.add('expanded');
                            parentNode = parentNode.parentElement.closest('.tree-item');
                        }
                    }
                });
            });
            
            // 树节点点击事件 - 切换复选框状态
            document.querySelectorAll('.tree-item-header').forEach(header => {
                header.addEventListener('click', function(e) {
                    // 如果点击的是切换按钮或复选框，不触发节点点击事件
                    if (e.target.classList.contains('tree-toggle') || e.target.classList.contains('tree-checkbox')) {
                        return;
                    }
                    
                    const checkbox = this.querySelector('.tree-checkbox');
                    if (checkbox) {
                        checkbox.checked = !checkbox.checked;
                        // 触发change事件以同步子节点状态
                        const event = new Event('change');
                        checkbox.dispatchEvent(event);
                    }
                });
            });
            
            // 内部分享时间设置逻辑
            document.querySelectorAll('input[name="internalShareTime"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const expiryTimeInput = document.getElementById('internalExpiryTime');
                    expiryTimeInput.disabled = this.value === 'permanent';
                });
            });
            
            // 外部分享时间设置逻辑
            document.querySelectorAll('input[name="externalShareTime"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const expiryTimeInput = document.getElementById('externalExpiryTime');
                    expiryTimeInput.disabled = this.value === 'permanent';
                });
            });
            
            // 密码设置逻辑
            document.getElementById('enablePassword').addEventListener('change', function() {
                const passwordContainer = document.querySelector('.password-input-container');
                passwordContainer.style.display = this.checked ? 'flex' : 'none';
            });
            
            // 密码输入验证
            document.getElementById('sharePassword').addEventListener('input', function() {
                // 只允许输入数字
                this.value = this.value.replace(/[^0-9]/g, '');
                
                // 限制长度为4-6位
                if (this.value.length > 6) {
                    this.value = this.value.slice(0, 6);
                }
            });
            
            // 确认分享按钮逻辑
            document.getElementById('confirmShareBtn').addEventListener('click', function() {
                const name = document.getElementById('shareName').value;
                const currentTab = document.querySelector('.share-tab.active').getAttribute('data-tab');
                let message = `${name} 分享成功`;
                
                if (currentTab === 'internal') {
                    // 内部分享设置
                    const checkedItems = document.querySelectorAll('.organization-tree .tree-checkbox:checked');
                    const selectedCount = checkedItems.length;
                    
                    let timeSetting = '永久有效';
                    const expiryOption = document.querySelector('input[name="internalShareTime"][value="expiry"]');
                    if (expiryOption.checked) {
                        const expiryTime = document.getElementById('internalExpiryTime').value;
                        if (expiryTime) {
                            timeSetting = `有效期至 ${new Date(expiryTime).toLocaleString()}`;
                        }
                    }
                    
                    message += `，已选择 ${selectedCount} 个组织/人员，${timeSetting}`;
                } else {
                    // 外部分享设置
                    let timeSetting = '永久有效';
                    const expiryOption = document.querySelector('input[name="externalShareTime"][value="expiry"]');
                    if (expiryOption.checked) {
                        const expiryTime = document.getElementById('externalExpiryTime').value;
                        if (expiryTime) {
                            timeSetting = `有效期至 ${new Date(expiryTime).toLocaleString()}`;
                        }
                    }
                    
                    const hasPassword = document.getElementById('enablePassword').checked;
                    const passwordStatus = hasPassword ? '已设置访问密码' : '未设置访问密码';
                    
                    const allowDownload = document.getElementById('allowDownload').checked;
                    const downloadStatus = allowDownload ? '允许下载' : '禁止下载';
                    
                    message += `，${timeSetting}，${passwordStatus}，${downloadStatus}`;
                }
                
                showMessage(message, 'success');
                closeShareModal();
            });
            
            // 分页按钮点击事件
            document.querySelectorAll('.pagination-btn:not(:disabled)').forEach(btn => {
                btn.addEventListener('click', function() {
                    if (this.textContent === '上一页' || this.textContent === '下一页') {
                        showMessage('分页功能尚未实现', 'info');
                    } else {
                        document.querySelectorAll('.pagination-btn').forEach(b => {
                            b.classList.remove('active');
                        });
                        this.classList.add('active');
                    }
                });
            });
            
            // 点击模态框外部关闭弹窗
            document.getElementById('shareModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeShareModal();
                }
            });
            
            // 搜索输入框 - 添加输入防抖
            let searchTimeout;
            const searchInput = document.querySelector('.search-input');
            searchInput.addEventListener('input', function() {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    filterFilesByName(this.value.trim());
                }, 300);
            });
            
            // 筛选下拉框事件 - 优化筛选逻辑
            document.querySelector('.filter-select').addEventListener('change', function() {
                const filterValue = this.value;
                filterFilesByType(filterValue);
            });
            
            // 更新面包屑导航 - 增强路径解析
            function updateBreadcrumb(path, name) {
                const breadcrumb = document.querySelector('.breadcrumb');
                if (!breadcrumb) {
                    console.warn('Breadcrumb element not found');
                    return;
                }
                
                breadcrumb.innerHTML = '';
                
                // 解析路径
                const pathParts = path.split('/').filter(Boolean);
                let currentPath = '';
                
                // 添加根节点
                const rootItem = document.createElement('span');
                rootItem.className = 'breadcrumb-item' + (path === '/' ? ' active' : '');
                rootItem.setAttribute('data-path', '/');
                rootItem.innerHTML = '<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" width="16" height="16" style="margin-right: 4px;"><path d="M9 13L21 13V18C21 19.6569 19.6569 21 18 21H6C4.34315 21 3 19.6569 3 18V6C3 4.34315 4.34315 3 6 3H14L21 10V13H9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg> 文档库';
                breadcrumb.appendChild(rootItem);
                
                // 如果不是根路径，添加中间路径节点
                if (path !== '/') {
                    pathParts.forEach((part, index) => {
                        currentPath += '/' + part;
                        
                        // 添加分隔符
                        const separator = document.createElement('span');
                        separator.className = 'breadcrumb-separator';
                        separator.textContent = '>';
                        breadcrumb.appendChild(separator);
                        
                        // 添加路径节点
                        const pathItem = document.createElement('span');
                        pathItem.className = 'breadcrumb-item' + (index === pathParts.length - 1 ? ' active' : '');
                        pathItem.setAttribute('data-path', currentPath);
                        
                        // 获取显示名称（这里简单使用路径部分，实际应用中可能需要映射）
                        const displayName = index === pathParts.length - 1 ? name : part;
                        pathItem.textContent = displayName;
                        breadcrumb.appendChild(pathItem);
                    });
                }
            }
            
            // 根据文件类型筛选文件
            function filterFilesByType(type) {
                const documentCards = document.querySelectorAll('.document-card');
                
                documentCards.forEach(card => {
                    if (type === 'all') {
                        card.style.display = 'block';
                        // 添加淡入动画
                        setTimeout(() => {
                            card.style.opacity = '1';
                            card.style.transform = 'scale(1)';
                        }, 10);
                    } else if (type === 'folder') {
                        if (card.classList.contains('folder-card')) {
                            card.style.display = 'block';
                            setTimeout(() => {
                                card.style.opacity = '1';
                                card.style.transform = 'scale(1)';
                            }, 10);
                        } else {
                            card.style.opacity = '0';
                            card.style.transform = 'scale(0.95)';
                            setTimeout(() => {
                                card.style.display = 'none';
                            }, 300);
                        }
                    } else {
                        // 根据data-type属性筛选
                        const cardType = card.getAttribute('data-type');
                        if (cardType === type) {
                            card.style.display = 'block';
                            setTimeout(() => {
                                card.style.opacity = '1';
                                card.style.transform = 'scale(1)';
                            }, 10);
                        } else {
                            card.style.opacity = '0';
                            card.style.transform = 'scale(0.95)';
                            setTimeout(() => {
                                card.style.display = 'none';
                            }, 300);
                        }
                    }
                });
            }
            
            // 根据标签页筛选文件
            function filterFilesByTab(tabName) {
                const filterSelect = document.querySelector('.filter-select');
                
                // 同步更新筛选下拉框
                if (tabName === '全部') {
                    filterSelect.value = 'all';
                } else if (tabName === '文件夹') {
                    filterSelect.value = 'folder';
                } else if (['文档', '表格', '演示文稿', 'PDF', '图片'].includes(tabName)) {
                    // 映射标签名称到文件类型
                    const typeMap = {
                        '文档': 'doc',
                        '表格': 'sheet',
                        '演示文稿': 'slide',
                        'PDF': 'pdf',
                        '图片': 'image'
                    };
                    filterSelect.value = typeMap[tabName];
                }
                
                // 触发筛选
                filterFilesByType(filterSelect.value);
                
                showMessage(`已切换至${tabName}视图`, 'success');
            }
            
            // 根据文件名搜索文件
            function filterFilesByName(keyword) {
                const documentCards = document.querySelectorAll('.document-card');
                
                if (keyword === '') {
                    // 搜索框为空，显示所有文件
                    documentCards.forEach(card => {
                        card.style.display = 'block';
                        setTimeout(() => {
                            card.style.opacity = '1';
                            card.style.transform = 'scale(1)';
                        }, 10);
                    });
                    return;
                }
                
                // 搜索关键词
                keyword = keyword.toLowerCase();
                documentCards.forEach(card => {
                    const fileName = card.querySelector('.document-name').textContent.toLowerCase();
                    if (fileName.includes(keyword)) {
                        card.style.display = 'block';
                        setTimeout(() => {
                            card.style.opacity = '1';
                            card.style.transform = 'scale(1)';
                        }, 10);
                    } else {
                        card.style.opacity = '0';
                        card.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            card.style.display = 'none';
                        }, 300);
                    }
                });
            }
            
            // 添加波纹动画样式
            const styleSheet = document.createElement('style');
            styleSheet.textContent = `
                @keyframes ripple-animation {
                    to {
                        transform: scale(10);
                        opacity: 0;
                    }
                }
            `;
            document.head.appendChild(styleSheet);
            
            // 初始化分享弹窗样式
            const modalContent = document.getElementById('shareModal').querySelector('.modal');
            if (modalContent) {
                modalContent.style.transition = 'all 0.2s ease';
                modalContent.style.transform = 'translateY(-10px)';
                modalContent.style.opacity = '0';
            }
            
            // 初始化高级筛选弹窗样式
            const filterModalContent = document.querySelector('.advanced-filter-overlay .advanced-filter-dialog');
            if (filterModalContent) {
                filterModalContent.style.transition = 'all 0.2s ease';
                filterModalContent.style.transform = 'translateY(-10px)';
                filterModalContent.style.opacity = '0';
            }
            
            // 初始化文档卡片的动画属性
            document.querySelectorAll('.document-card').forEach(card => {
                card.style.transition = 'all 0.3s ease';
            });
            
            // 新建文件夹弹窗功能实现
            const createFolderModal = document.getElementById('createFolderModal');
            const folderNameInput = document.getElementById('folderName');
            const folderLocationSelect = document.getElementById('folderLocation');
            const folderDescriptionInput = document.getElementById('folderDescription');
            const closeCreateFolderBtn = document.getElementById('closeCreateFolderBtn');
            const cancelCreateFolderBtn = document.getElementById('cancelCreateFolderBtn');
            const confirmCreateFolderBtn = document.getElementById('confirmCreateFolderBtn');
            
            // 显示新建文件夹弹窗
            function showCreateFolderModal() {
                createFolderModal.style.display = 'flex';
                setTimeout(() => {
                    const modal = createFolderModal.querySelector('.modal');
                    if (modal) {
                        modal.style.transform = 'translateY(0)';
                        modal.style.opacity = '1';
                    }
                }, 10);
                // 阻止背景滚动
                document.body.style.overflow = 'hidden';
                
                // 清空表单
                folderNameInput.value = '';
                folderLocationSelect.value = currentPath || '/';
                folderDescriptionInput.value = '';
            }
            
            // 隐藏新建文件夹弹窗
            function hideCreateFolderModal() {
                const modal = createFolderModal.querySelector('.modal');
                if (modal) {
                    modal.style.transform = 'translateY(-10px)';
                    modal.style.opacity = '0';
                    setTimeout(() => {
                        createFolderModal.style.display = 'none';
                        // 恢复背景滚动
                        document.body.style.overflow = '';
                    }, 200);
                }
            }
            
            // 初始化新建文件夹弹窗样式
            const createFolderModalContent = document.getElementById('createFolderModal').querySelector('.modal');
            if (createFolderModalContent) {
                createFolderModalContent.style.transition = 'all 0.2s ease';
                createFolderModalContent.style.transform = 'translateY(-10px)';
                createFolderModalContent.style.opacity = '0';
            }
            
            // 新建文件夹按钮 - 仅作为展示元素，移除了交互功能
            // document.querySelectorAll('.btn-secondary')[0].addEventListener('click', function() {
            //     showCreateFolderModal();
            // });
            
            // 绑定关闭弹窗事件
            closeCreateFolderBtn.addEventListener('click', hideCreateFolderModal);
            cancelCreateFolderBtn.addEventListener('click', hideCreateFolderModal);
            
            // 点击模态框外部关闭弹窗
            createFolderModal.addEventListener('click', function(e) {
                if (e.target === this) {
                    hideCreateFolderModal();
                }
            });
            
            // 文件夹名称输入验证
            folderNameInput.addEventListener('input', function() {
                // 限制字符长度为50
                if (this.value.length > 50) {
                    this.value = this.value.substring(0, 50);
                }
            });
            
            // 确认创建文件夹
            confirmCreateFolderBtn.addEventListener('click', function() {
                const folderName = folderNameInput.value.trim();
                const folderLocation = folderLocationSelect.value;
                const folderDescription = folderDescriptionInput.value.trim();
                
                // 表单验证
                if (!folderName) {
                    showMessage('请输入文件夹名称', 'warning');
                    folderNameInput.focus();
                    return;
                }
                
                // 模拟创建文件夹
                createNewFolder(folderName, folderLocation, folderDescription);
            });
            
            // 模拟创建文件夹函数
            function createNewFolder(name, location, description) {
                // 显示加载状态
                confirmCreateFolderBtn.disabled = true;
                confirmCreateFolderBtn.textContent = '创建中...';
                
                // 模拟网络请求延迟
                setTimeout(() => {
                    // 在实际应用中，这里会发送API请求到服务器创建文件夹
                    showMessage(`成功创建文件夹"${name}"`, 'success');
                    
                    // 隐藏弹窗
                    hideCreateFolderModal();
                    
                    // 重置按钮状态
                    confirmCreateFolderBtn.disabled = false;
                    confirmCreateFolderBtn.textContent = '创建';
                    
                    // 刷新当前视图（在实际应用中，这里会重新加载文件列表）
                    refreshDocumentList();
                }, 1000);
            }
            
            // 刷新文档列表（模拟）
            function refreshDocumentList() {
                const documentCards = document.querySelectorAll('.document-card');
                
                // 为所有卡片添加淡出效果
                documentCards.forEach(card => {
                    card.style.opacity = '0';
                    card.style.transform = 'scale(0.95)';
                });
                
                // 模拟刷新延迟
                setTimeout(() => {
                    // 为所有卡片添加淡入效果
                    documentCards.forEach(card => {
                        card.style.opacity = '1';
                        card.style.transform = 'scale(1)';
                    });
                }, 300);
            }
        });
    </script>
</body>
</html>